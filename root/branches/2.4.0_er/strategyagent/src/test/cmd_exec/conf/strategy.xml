<?xml version="1.0" encoding="UTF-8" ?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
                           http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd">
    <!-- set up Spring context scanning -->
    <context:component-scan base-package="com.marketcetera.ramius"/>
    <!-- define input file keyword-based modifications to apply to outgoing orders -->
    <bean class="com.marketcetera.ramius.strategy.impl.KeywordSpec" id="metc-NumToShow">
        <property name="broker" value="metc"/>
        <property name="tag" value="58"/>
        <property name="keyword" value="NumToShow"/>
        <property name="appliesToMessageTypes" value="D,G"/>
    </bean>
    <!-- Citibank FX -->
    <bean class="com.marketcetera.ramius.strategy.impl.KeywordSpec" id="citi-EndTime">
        <property name="broker" value="citifx"/>
        <property name="tag" value="126"/>
        <property name="keyword" value="EndTime"/>
        <property name="appliesToMessageTypes" value="D,G"/>
    </bean>
    <bean class="com.marketcetera.ramius.strategy.impl.KeywordSpec" id="citi-StartTime">
        <property name="broker" value="citifx"/>
        <property name="tag" value="168"/>
        <property name="keyword" value="StartTime"/>
        <property name="appliesToMessageTypes" value="D,G"/>
    </bean>
    <bean class="com.marketcetera.ramius.strategy.impl.KeywordSpec" id="citi-AlgoType">
        <!-- broker to which this keyword applies -->
        <property name="broker" value="citifx"/>
        <!-- tag on the outgoing order -->
        <property name="tag" value="847"/>
        <!-- keyword in the input file -->
        <property name="keyword" value="AlgoType"/>
        <!-- comma-separated list of MsgType values to which to apply this modification -->
        <property name="appliesToMessageTypes" value="D,G"/>
        <!-- value to apply to the order: the key is the value that appears in the input file:
        
          AlgoType => TWAP1
          
          e.g. would set tag 847 on outgoing orders to 501. if omitted, the input file value is used without translation
         -->
        <property name="value">
          <map>
            <entry key="TWAP1" value="501"/>
            <entry key="TWAP2" value="502"/>
            <entry key="DAGGER3" value="203"/>
            <entry key="DAGGER 5" value="205"/>
            <entry key="SILENT PARTNER" value="601"/>
            <entry key="RIPPLE" value="301"/>
          </map>
        </property>
    </bean>
    <!-- Credit Suisse Equities -->
    <bean class="com.marketcetera.ramius.strategy.impl.KeywordSpec" id="cseq-AlgoType">
        <property name="broker" value="cseq"/>
        <property name="tag" value="6061"/>
        <property name="keyword" value="AlgoType"/>
        <property name="appliesToMessageTypes" value="D,G"/>
    </bean>
    <bean class="com.marketcetera.ramius.strategy.impl.KeywordSpec" id="cseq-MaxParticipation">
        <property name="broker" value="cseq"/>
        <property name="tag" value="6064"/>
        <property name="keyword" value="MaxParticipation"/>
        <property name="appliesToMessageTypes" value="D,G"/>
    </bean>
    <bean class="com.marketcetera.ramius.strategy.impl.KeywordSpec" id="cseq-StartTime">
        <property name="broker" value="cseq"/>
        <property name="tag" value="6062"/>
        <property name="keyword" value="StartTime"/>
        <property name="appliesToMessageTypes" value="D,G"/>
    </bean>
    <bean class="com.marketcetera.ramius.strategy.impl.KeywordSpec" id="cseq-EndTime">
        <property name="broker" value="cseq"/>
        <property name="tag" value="6063"/>
        <property name="keyword" value="EndTime"/>
        <property name="appliesToMessageTypes" value="D,G"/>
    </bean>
    <!-- Credit Suisse FX -->
    <bean class="com.marketcetera.ramius.strategy.impl.KeywordSpec" id="csfx-Exchange">
        <property name="broker" value="csfx"/>
        <property name="tag" value="207"/>
        <property name="keyword" value="Exchange"/>
        <property name="appliesToMessageTypes" value="D"/>
    </bean>
    <bean class="com.marketcetera.ramius.strategy.impl.KeywordSpec" id="csfx-AlgoType">
        <property name="broker" value="csfx"/>
        <property name="tag" value="6061"/>
        <property name="keyword" value="AlgoType"/>
        <property name="appliesToMessageTypes" value="D,G"/>
    </bean>
    <bean class="com.marketcetera.ramius.strategy.impl.KeywordSpec" id="csfx-StartTime">
        <property name="broker" value="csfx"/>
        <property name="tag" value="6062"/>
        <property name="keyword" value="StartTime"/>
        <property name="appliesToMessageTypes" value="D,G"/>
    </bean>
    <bean class="com.marketcetera.ramius.strategy.impl.KeywordSpec" id="csfx-EndTime">
        <property name="broker" value="csfx"/>
        <property name="tag" value="6063"/>
        <property name="keyword" value="EndTime"/>
        <property name="appliesToMessageTypes" value="D,G"/>
    </bean>
    <bean class="com.marketcetera.ramius.strategy.impl.KeywordSpec" id="csfx-MaxParticipation">
        <property name="broker" value="csfx"/>
        <property name="tag" value="6064"/>
        <property name="keyword" value="MaxParticipation"/>
        <property name="appliesToMessageTypes" value="D,G"/>
    </bean>
    <!-- Barclays -->
    <bean class="com.marketcetera.ramius.strategy.impl.KeywordSpec" id="barclays-Exchange">
        <property name="broker" value="barclays"/>
        <property name="tag" value="207"/>
        <property name="keyword" value="Exchange"/>
        <property name="appliesToMessageTypes" value="D"/>
    </bean>
    <bean class="com.marketcetera.ramius.strategy.impl.KeywordSpec" id="barclays-AlgoType">
        <property name="broker" value="barclays"/>
        <property name="tag" value="847"/>
        <property name="keyword" value="AlgoType"/>
        <property name="appliesToMessageTypes" value="D,G"/>
    </bean>
    <!-- 848 -->
    <bean class="com.marketcetera.ramius.strategy.impl.KeywordSpec" id="barclays-StartTime">
        <property name="broker" value="barclays"/>
        <property name="tag" value="6062"/>
        <property name="keyword" value="StartTime"/>
        <property name="appliesToMessageTypes" value="D,G"/>
    </bean>
    <bean class="com.marketcetera.ramius.strategy.impl.KeywordSpec" id="barclays-EndTime">
        <property name="broker" value="barclays"/>
        <property name="tag" value="6063"/>
        <property name="keyword" value="EndTime"/>
        <property name="appliesToMessageTypes" value="D,G"/>
    </bean>
    <bean class="com.marketcetera.ramius.strategy.impl.KeywordSpec" id="barclays-MaxParticipation">
        <property name="broker" value="barclays"/>
        <property name="tag" value="6064"/>
        <property name="keyword" value="MaxParticipation"/>
        <property name="appliesToMessageTypes" value="D,G"/>
    </bean>
    <!-- Deutsche Bank Futures -->
    <bean class="com.marketcetera.ramius.strategy.impl.KeywordSpec" id="dbfut-Exchange">
        <property name="broker" value="dbfut"/>
        <property name="tag" value="207"/>
        <property name="keyword" value="Exchange"/>
        <property name="appliesToMessageTypes" value="D"/>
    </bean>
    <bean class="com.marketcetera.ramius.strategy.impl.KeywordSpec" id="dbfut-AlgoType">
        <property name="broker" value="dbfut"/>
        <property name="tag" value="7800"/>
        <property name="keyword" value="AlgoType"/>
        <property name="appliesToMessageTypes" value="D,G"/>
    </bean>
    <bean class="com.marketcetera.ramius.strategy.impl.KeywordSpec" id="dbfut-StartTime">
        <property name="broker" value="dbfut"/>
        <property name="tag" value="7805"/>
        <property name="keyword" value="StartTime"/>
        <property name="appliesToMessageTypes" value="D,G"/>
    </bean>
    <bean class="com.marketcetera.ramius.strategy.impl.KeywordSpec" id="dbfut-EndTime">
        <property name="broker" value="dbfut"/>
        <property name="tag" value="7806"/>
        <property name="keyword" value="EndTime"/>
        <property name="appliesToMessageTypes" value="D,G"/>
    </bean>
    <bean class="com.marketcetera.ramius.strategy.impl.KeywordSpec" id="dbfut-MaxParticipation">
        <property name="broker" value="dbfut"/>
        <property name="tag" value="7807"/>
        <property name="keyword" value="MaxParticipation"/>
        <property name="appliesToMessageTypes" value="D,G"/>
    </bean>
    <!--  Knight -->
    <bean class="com.marketcetera.ramius.strategy.impl.KeywordSpec" id="knight-AlgoType">
        <property name="broker" value="knight-prod"/>
        <property name="tag" value="6101"/>
        <property name="keyword" value="AlgoType"/>
        <property name="appliesToMessageTypes" value="D,G"/>
    </bean>
    <bean class="com.marketcetera.ramius.strategy.impl.KeywordSpec" id="knight-StartTime">
        <property name="broker" value="knight-prod"/>
        <property name="tag" value="6203"/>
        <property name="keyword" value="StartTime"/>
        <property name="appliesToMessageTypes" value="D,G"/>
    </bean>
    <bean class="com.marketcetera.ramius.strategy.impl.KeywordSpec" id="knight-EndTime">
        <property name="broker" value="knight-prod"/>
        <property name="tag" value="6205"/>
        <property name="keyword" value="EndTime"/>
        <property name="appliesToMessageTypes" value="D,G"/>
    </bean>
    <bean class="com.marketcetera.ramius.strategy.impl.KeywordSpec" id="knight-MaxParticipation">
        <property name="broker" value="knight-prod"/>
        <property name="tag" value="6209"/>
        <property name="keyword" value="MaxParticipation"/>
        <property name="appliesToMessageTypes" value="D,G"/>
    </bean>
    <bean class="com.marketcetera.ramius.strategy.impl.KeywordOrderModifier" id="keywordOrderModifier">
        <property name="keySpecs">
            <list>
                <ref bean="metc-NumToShow"/>
                <ref bean="citi-AlgoType"/>
                <ref bean="citi-EndTime"/>
                <ref bean="citi-StartTime"/>
                <ref bean="citi-AlgoType"/>
                <ref bean="cseq-AlgoType"/>
                <ref bean="cseq-MaxParticipation"/>
                <ref bean="cseq-StartTime"/>
                <ref bean="cseq-EndTime"/>
                <ref bean="csfx-Exchange"/>
                <ref bean="csfx-AlgoType"/>
                <ref bean="csfx-StartTime"/>
                <ref bean="csfx-EndTime"/>
                <ref bean="csfx-MaxParticipation"/>
                <ref bean="barclays-Exchange"/>
                <ref bean="barclays-AlgoType"/>
                <ref bean="barclays-StartTime"/>
                <ref bean="barclays-EndTime"/>
                <ref bean="barclays-MaxParticipation"/>
                <ref bean="dbfut-Exchange"/>
                <ref bean="dbfut-AlgoType"/>
                <ref bean="dbfut-StartTime"/>
                <ref bean="dbfut-EndTime"/>
                <ref bean="dbfut-MaxParticipation"/>
                <ref bean="knight-AlgoType"/>
                <ref bean="knight-StartTime"/>
                <ref bean="knight-EndTime"/>
                <ref bean="knight-MaxParticipation"/>
            </list>
        </property>
        <property name="strictValidation" value="false"/>
    </bean>
    <!-- generators/executors -->
    <bean class="com.marketcetera.ramius.strategy.impl.MarketceteraOrderGenerator" id="orderGenerator">
        <property name="orderModifiers">
            <list>
                <ref bean="keywordOrderModifier"/>
            </list>
        </property>
    </bean>
    <bean class="com.marketcetera.ramius.strategy.impl.DefaultMilepostExecutor" id="milepostExecutor"/>
    <bean id="ladderGenerator" class="com.marketcetera.ramius.strategy.impl.LadderGeneratorImpl"/>
    <bean id="notificationExecutor" class="com.marketcetera.ramius.strategy.impl.EmailNotificationExecutor">
        <!-- for multiple addresses, separate with ',' -->
        <property name="recipients" value="bjones@ramius.com,lgibbs@ramius.com"/>
    </bean>
    <bean id="timerExecutor" class="com.marketcetera.ramius.strategy.impl.DefaultTimerExecutor">
        <property name="name" value="Marketcetera Timer Executor"/>
    </bean>
    <bean id="templateGenerator" class="com.marketcetera.ramius.strategy.impl.FileTemplateExecutor"/>
    <bean id="dataRecorder" class="com.marketcetera.strategy.DataRecorder"/>
    <!-- main object tied-in with application context -->
    <bean class="com.marketcetera.ramius.strategy.impl.TradeManagerImpl" id="tradeManager">
        <property name="dataRecorder" ref="dataRecorder"/>
    </bean>
    <!-- validators and converters -->
    <bean class="com.marketcetera.ramius.validation.impl.BrokerIDValidator" id="brokerIDValidator"/>
    <!-- general definition beans -->
    <!-- directory into which to drop input files (required) -->
    <bean class="java.lang.String" id="inputDirectory">
      <constructor-arg value="/common/TradeManager"/>
    </bean>
    <!-- number of ms in advance of order start times to send orders to the broker (optional, default = 0) -->
    <bean class="java.lang.Long" id="presendInterval">
      <constructor-arg value="1000"/>
    </bean>
    <!-- interval in ms at which to poll input directory (optional, default = 250) -->
    <bean class="java.lang.Long" id="pollInterval">
      <constructor-arg value="250"/>
    </bean>
</beans>
